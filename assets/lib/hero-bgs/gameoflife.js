var GameOfLife;GameOfLife=function(){function t(t,e,i){this.canvas=t.getContext("2d"),this.genc=e,this.grid={x:e.length,y:e[0].length},null!=i.grid&&(this.grid=i.grid),null!=i.cell&&(this.cell=i.cell),this.canvas.fillStyle="light"===APP.currentTheme?"#eeebeb":"#2d2d35"}return t.prototype.canvas=null,t.prototype.gen=0,t.prototype.genc=[],t.prototype.history=5,t.prototype.seedweight=.2,t.prototype.grid={x:50,y:50},t.prototype.cell={w:10,h:10},t.prototype._countNeighbours=function(t,e){var i,r,n,h;return r=t+1>this.grid.x-1?0:t+1,i=t-1<0?this.grid.x-1:t-1,h=e+1>this.grid.y-1?0:e+1,n=e-1<0?this.grid.y-1:e-1,this.genc[i][n]+this.genc[t][n]+this.genc[r][n]+this.genc[i][e]+this.genc[r][e]+this.genc[i][h]+this.genc[t][h]+this.genc[r][h]},t.prototype._getState=function(t,e){var i,r;return i=this.genc[t][e],!!(3===(r=this._countNeighbours(t,e))||2===r&&i)},t.prototype.runGeneration=function(){var t,e;return this.genc=function(){var i,r,n;for(n=[],t=i=0,r=this.grid.x;0<=r?i<r:i>r;t=0<=r?++i:--i)n.push(function(){var i,r,n;for(n=[],e=i=0,r=this.grid.y;0<=r?i<r:i>r;e=0<=r?++i:--i)n.push(this._getState(t,e));return n}.call(this));return n}.call(this),this.gen++},t.prototype.render=function(){var t,e,i,r,n,h;for(n=t=0,i=this.grid.x;0<=i?t<i:t>i;n=0<=i?++t:--t)for(h=e=0,r=this.grid.y;0<=r?e<r:e>r;h=0<=r?++e:--e)this.genc[n][h]?this.canvas.fillRect(n*this.cell.w,h*this.cell.h,this.cell.w,this.cell.h):this.canvas.clearRect(n*this.cell.w,h*this.cell.h,this.cell.w,this.cell.h);return!0},t.prototype.changeTheme=function(){return this.canvas.fillStyle="light"===APP.currentTheme?"#eeebeb":"#2d2d35"},t.prototype.step=function(){return this.runGeneration(),this.render()},t}(),window.GameOfLife=GameOfLife;