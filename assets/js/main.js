(function(){var e,t,o,a;(e={}).SUBCLUB_END_HOUR=17,e.loadSubclubSchedule=function(t){var o,a,n,l,s,r,i,d,c;o=JSON.parse(JSON.stringify(t)),c=(new Date).getTime();for(s in o){if(a=o[s],a={t:new Date(null!=(d=a.date)?d:a).setHours(e.SUBCLUB_END_HOUR),l:parseInt(a.lesson)},o[s]=a,void 0!==r&&null!==r||void 0!==i&&null!==i||(r=s,i=s),a.t<=c&&(a.t>=o[r].t||o[r].t>c)){if(a.t===o[r].t&&a.l<o[r].l)continue;r=s}if(a.t>c&&(a.t<=o[i].t||o[i].t<c)){if(a.t===o[i].t&&a.l>o[i].l)continue;i=s}}return o[r].t<c&&(n=new Date(o[r].t)),o[i].t>=c&&(l=new Date(o[i].t)),{mostRecent:{id:null!=n?r:null,date:n},nextUp:{id:null!=l?i:null,date:l}}},e.renderSubclubSchedule=function(t,o){var a,n,l,s,r;return r={},r=e.loadSubclubSchedule(o),a=t.find(".lesson-last"),n=t.find(".lesson-next"),l=t.attr("data-lesson-last-balloon-pos")||"right",s=t.attr("data-lesson-next-balloon-pos")||"left",null!==r.mostRecent.id?a.each(function(){var e,t;return e=$(this),t=o[r.mostRecent.id],t.title=t.title.replace(/^.*?@/,""),e.is("a")?e.addClass("lesson-link").attr("href",t.url).attr("data-balloon",t.title).attr("data-balloon-pos",l).attr("data-balloon-bluntish",!0).html(t.title):e.html("<a href='"+t.url+"' class='lesson-link' data-balloon='"+t.date+"' data-balloon-pos='"+l+"' data-balloon-bluntish> "+t.title+"</a>")}):a.each(function(){var e;return(e=$(this)).prop(!1)?e.addClass("lesson-link").addClass("disabled").html("null"):e.html("<a class='lesson-link disabled'>null</a>")}),null!==r.nextUp.id?n.each(function(){var e,t;return e=$(this),t=o[r.nextUp.id],t.title=t.title.replace(/^.*?@/,""),e.is("a")?e.addClass("lesson-link").attr("href",t.url).attr("data-balloon",t.title).attr("data-balloon-pos",s).attr("data-balloon-bluntish",!0).html(t.date):e.html("<a href='"+t.url+"' class='lesson-link' data-balloon='"+t.title+"' data-balloon-pos='"+s+"' data-balloon-bluntish> "+t.date+"</a>")}):n.each(function(){var e;return(e=$(this)).prop(!1)?e.addClass("lesson-link").addClass("disabled").html("null"):e.html("<a class='lesson-link disabled'>null</a>")}),!0},a=function(e){return e.removeClass("closed").find(".collapse-el").removeClass("closed").attr("title","Collapse sidebar").html("&laquo;"),UTILS.setIndefiniteCookie(CONSTS.cookieCollapseSidebar,"0")},t=function(e){return e.addClass("closed").find(".collapse-el").addClass("closed").attr("title","Open sidebar").html("&raquo;"),UTILS.setIndefiniteCookie(CONSTS.cookieCollapseSidebar,"1")},e.toggleSidebar=function(e){var o,n;return e.preventDefault(),n=$(e.target),o=n.closest(".sidebar-collapsible"),n.hasClass("closed")?a(o):t(o),!0},e.currentTheme="light",o=function(e,t,o){var a;return null==o&&(o=null),void 0!==CustomEvent.constructor.name?e.dispatchEvent(new CustomEvent(t,{detail:o})):((a=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,o),e.dispatchEvent(a))},e.changeTheme=function(t){return $(".toggled-theme").each(function(e,o){return e.href=window.STYLESHEETS[t][o]}),"dark"===t?($("body").removeClass("theme-light"),$("body").addClass("theme-dark"),$(".toggle-theme").attr("title","Use light theme"),e.currentTheme="dark",document.documentElement.style.backgroundColor="#1a1f2a"):($("body").removeClass("theme-dark"),$("body").addClass("theme-light"),$(".toggle-theme").attr("title","Use dark theme"),e.currentTheme="light",document.documentElement.style.backgroundColor="#fff"),o(window,"changetheme")},e.revealEmail=function(){var e;return e=[[+!+[]]+[+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]],(!1+[])[+!+[]],(!0+[])[+!+[]],[+!+[]]+[+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]],[+!+[]]+[+!+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]],([!1]+[][[]])[+!+[]+[+[]]],(!1+[])[!+[]+!+[]],(!1+[])[!+[]+!+[]],(!0+[])[!+[]+!+[]+!+[]],(+(+!+[]+[+!+[]]+(!0+[])[!+[]+!+[]+!+[]]+[!+[]+!+[]]+[+[]])+[])[+!+[]],[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]],[+!+[]]+[+!+[]]+[+!+[]],[+!+[]]+[+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]],[+!+[]]+[+!+[]]+[!+[]+!+[]],(!1+[])[!+[]+!+[]+!+[]],[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]],([!1]+[][[]])[+!+[]+[+[]]],[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]+[!+[]+!+[]+!+[]+!+[]],[+!+[]]+[+[]]+[!+[]+!+[]+!+[]],[+!+[]]+[+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]],(!1+[])[+!+[]],([!1]+[][[]])[+!+[]+[+[]]],(!1+[])[!+[]+!+[]],(+(+!+[]+[+!+[]]+(!0+[])[!+[]+!+[]+!+[]]+[!+[]+!+[]]+[+[]])+[])[+!+[]],[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]],[+!+[]]+[+!+[]]+[+!+[]],[+!+[]]+[+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]].map(function(e){return 0|e?String[atob("ZnJvbUNoYXJDb2Rl")](e):e}).join(""),alert(e)},e.onload=function(){var o,a,n,l,s;return console.log("Loaded on "+(new Date).toLocaleString()),"dark"===Cookies.get(CONSTS.cookieTheme)&&e.changeTheme("dark"),o=function(){return"false"===Cookies.get(CONSTS.easterEgg)?($("body").addClass("easter-egg"),Cookies.set(CONSTS.easterEgg,"true")):($("body").removeClass("easter-egg"),Cookies.set(CONSTS.easterEgg,"false"))},a=function(){var e,t,a;return t=[38,38,40,40,37,39,37,39,66,65],e=0,a=null,function(n){if(!(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey))return t[e]!==n.keyCode?e=0:++e===t.length?(e=0,clearTimeout(a),o()):a=window.setTimeout(function(){return e=0},1500)}},"true"===Cookies.get(CONSTS.easterEgg)&&$("body").addClass("easter-egg"),$(window).on("keydown",a()),$(".toggle-theme").on("click",function(t){var o;return o=Cookies.get(CONSTS.cookieTheme),t.preventDefault(),"dark"===o?(Cookies.set(CONSTS.cookieTheme,"light"),e.changeTheme("light")):(Cookies.set(CONSTS.cookieTheme,"dark"),e.changeTheme("dark"))}),$(".announcement-sticky").on("click","a",function(e){var t;if(t=$(this).closest(".announcement-sticky"),e.preventDefault(),t.remove(),Cookies.set(""+CONSTS.cookieStickyPrefix+t.data("id"),"1"),"#"!==$(this).attr("href"))return window.location=$(this).attr("href")}),$("body").hasClass("no-hero")||$("body").hasClass("landing")||$("body").hasClass("lesson")||$("body").hasClass("post")||$("body").hasClass("resource")||!(window.innerWidth>CONSTS.bpTablet)||($(window).on("scroll",function(e){return window.pageYOffset>100?$("body .site-header").removeClass("at-top"):$("body .site-header").addClass("at-top")}),$("body .site-header").addClass("at-top")),function(){var e;if((e=$(".announcement-sticky")).length&&("1"===Cookies.get(""+CONSTS.cookieStickyPrefix+e.data("id"))||(new Date).getTime()>new Date(e.data("displayUntil")).getTime()))return e.remove()}(),$(".collapse-el").html("&laquo;"),$(".collapse-el.closed").html("&raquo;"),"1"===Cookies.get(CONSTS.cookieCollapseSidebar)&&t($(".sidebar-collapsible")),$("a.footnote, .footnote-ref a").on("click",function(e){var t,o,a,n,l,s;return e.preventDefault(),t=$(".footnote-tip"),o=$($(this).attr("href")),a=o.html().trim().replace(/^<p>([\s\S]+) <a[^>]+>.<\/a><\/p>/,"$1").replace(/^<a.+?>\d+<\/a>\.\s+/,"").replace(/^[a-z]/,function(e){return e.toUpperCase()}),t.html()===a&&null!=t[0].offsetParent?(t.hide(),o.removeClass("targeted")):(window.pageYOffset+window.innerHeight>o.offset().top+o.outerHeight()&&window.pageYOffset<o.offset().top||(t.show().html(a),s=(l=$(this).offset()).top-t.outerHeight()-5,(n=l.left-(t.outerWidth()-$(this).width())/2)+t.outerWidth()>window.innerWidth?n=window.innerWidth-t.outerWidth()-5:n<$(this).closest("p").offset().left&&(n=$(this).closest("p").offset().left),t.css({top:UTILS.numToPx(s),left:UTILS.numToPx(n)}),t.offset().top<window.pageYOffset+$(".site-header").outerHeight()&&window.scroll(0,t.offset().top-$(".site-header").outerHeight()-5)),o.addClass("targeted"))}),$("a.footnote, .footnote-ref a").on("blur",function(e){var t;return t=$(this),setTimeout(function(){return document.activeElement!==document.body&&$(document.activeElement).closest(".footnote-tip").length?t.trigger("focus"):($(".footnote-tip").hide(),$(t.attr("href")).removeClass("targeted"))},1)}),$("body").removeClass("no-js"),n=!1,l=function(e){var t;try{return console.log(e),katex.renderToString($(e).text().replace(/%.*/g,""),{throwOnError:!0,displayMode:~e.type.indexOf("mode=display")})}catch(e){return t=e,console.log(t.message),n=!0}},s=function(){var e,t,o;return t="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js",e="sha384-Ra6zh6uYMmH5ydwCqqMoykyf1T/+ZcnOQfFPhDrp2kI4OIxadnhsvvA2vv9A7xYv",o=document.createElement("script"),o.src=t,o.integrity=e,o.crossOrigin="anonymous",$("head").append(o)},$('script[type*="math/tex"]').each(l),window.renderMathInElement(document.body,{delimiters:[{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}],throwOnError:!0,errorCallback:function(){return console.log("KaTeX rendering failed! Loading MathJax"),s()}}),n&&(console.log("KaTeX rendering failed! Loading MathJax"),s()),anchors.options={visible:"touch",icon:"ยง"},anchors.add("#main-content h2, #main-content h3"),SCRIPTS.run()},window.CONSTS=CONSTS,window.APP=e,window.UTILS=UTILS,$(e.onload)}).call(this);