(function(){var e,t,n,o;t=function(e){return window.location.hash="#"+e.attr("id"),window.scroll(0,e.offset().top-$("#toc").outerHeight()-.5*CONSTS.ex)},$(".make-distraction-free").on("click",function(e){return e.preventDefault(),$("body").toggleClass("distraction-free"),$(window).one("keypress",function(e){if(27===e.keyCode)return $("body").removeClass("distraction-free")})}),$("#toc a").on("click",function(e){return e.preventDefault(),t($($(this).attr("href")))}),window.location.hash&&(e=$(window.location.hash)).length&&t(e),window.IntersectionObserver&&window.innerWidth>=CONSTS.bpTablet&&!$("body").hasClass("landing")&&!$("body").hasClass("post")&&$("#toc").length&&(n=new IntersectionObserver(function(e,t){var n,o,i,s,r,a;for(a=[],i=0,s=e.length;i<s;i++)r=(n=e[i]).intersectionRatio,o=n.target.querySelector("h2[id]"),r?a.push($("#toc [href='#"+o.id+"']").addClass("in-view")):a.push($("#toc [href='#"+o.id+"']").removeClass("in-view"));return a},{threshold:[0,1]}),$(".sect1").each(function(e){return n.observe(e)}),o=new IntersectionObserver(function(e,t){var n,o,i;return n=e[0],i=$("#toc"),o=$(".content.container").offset().left,$("#main-content").is(":first-child")&&(o=$("#main-content").offset().left),n.intersectionRatio?i.addClass("invisible"):(i.removeClass("invisible"),i.css({paddingLeft:UTILS.numToPx(o),paddingRight:UTILS.numToPx(o)}),$(".sidebar-collapsible").css({top:UTILS.numToPx(i.outerHeight()+CONSTS.ex)}))},{threshold:[0]}),$("#toc").addClass("toc-fixed").addClass("invisible").append("<a href='#' onclick='event.preventDefault();window.scroll(0,0)' >Scroll to top</a>"),$("#toctitle").text($(".page-title")[0].firstChild.textContent),o.observe($(".page-header")[0]),$(".sidebar-collapsible").css({paddingTop:UTILS.numToPx(0),top:UTILS.numToPx($("#toc").outerHeight()+CONSTS.ex)}))}).call(this);