<head>
  <meta charset="utf-8">

  {% comment %}{% raw %} Source for below; regex based from https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie#Example_2_Get_a_sample_cookie_named_test2
  <script>window.d = document;
    window.s = d.documentElement.style;
    switch (window.t = d.cookie.replace(/(?:(?:^|.*;\s*)theme\s*=\s*([^;]*).*$)|^.*$/, "$1") || 'light') {
      case 'light': s.backgroundColor = '#fff'; break;
      case 'dark': s.backgroundColor = '#1a1f2a'; break;
    }
    delete window.s;
  </script>
  {% endraw %}{% endcomment %}<script>window.d=document,window.s=d.documentElement.style;switch(window.t=d.cookie.replace(/(?:(?:^|.*;\s*)theme\s*=\s*([^;]*).*$)|^.*$/,"$1")||'light'){case 'light':s.backgroundColor='#fff';break;case 'dark':s.backgroundColor='#1a1f2a';break}delete window.s</script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="theme-color" content="#f52f2f">

  <link rel="dns-prefetch" href="https://brick.a.ssl.fastly.net">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  <link rel="dns-prefetch" href="https://googletagmanager.com">

  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }} â€¢ {{ site.description }}</title>

  {% seo title=false %}

  {% assign icon_loc = '/assets/images/favicons/icon' | relative_url %}
  <link rel="mask-icon" href="{{ icon_loc }}-pinned.svg?v={{ site.build_version }}" color="#f52f2f">
  <link id="favicon" rel="shortcut icon" href="{{ icon_loc }}.ico?v={{ site.build_version }}" type="image/x-icon">

  {% if site.production %}
  <!-- BEGIN GA -->
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', '{{ site.ga_id }}', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>

  <!-- END GA -->
  {% endif %}

  <!-- BEGIN CSS -->
  <link href="https://brick.a.ssl.fastly.net/Lato:300,400,700,400i:f" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.css" integrity="sha384-B41nY7vEWuDrE9Mr+J2nBL0Liu+nl/rBXTdpQal730oTHdlrlXHzYMOhDU60cwde" crossorigin="anonymous">

  {% assign layout = page.layout %}
  {% assign ext = page.path | split: '.' | last %}

  <link href="{{ '/assets/lib/skeleton.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  <link href="{{ '/assets/lib/balloon.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  {% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}
  <link href="{{ '/assets/lib/lesson-default.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  {% endif %}
  <link href="{{ '/assets/css/main.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  {% if layout == 'home' or layout == 'subclub-landing' %}
  <link href="{{ '/assets/css/home.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  {% endif %}
  {% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}
  <link href="{{ '/assets/css/subclubs.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  {% endif %}

  <noscript>
  <link href="{{ '/assets/lib/skeleton-light.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  <link href="{{ '/assets/lib/balloon-light.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  {% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}
  <link href="{{ '/assets/lib/lesson-default-light.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  {% endif %}
  <link href="{{ '/assets/css/main-light.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  <link href="{{ '/assets/lib/pygments-manni.css' | relative_url }}" rel="stylesheet">
  {% if layout == 'home' or layout == 'subclub-landing' %}
  <link href="{{ '/assets/css/home-light.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  {% endif %}
  {% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}
  <link href="{{ '/assets/css/subclubs-light.css' | relative_url }}?v={{ site.build_version }}" rel="stylesheet">
  {% endif %}
  </noscript>

  {% comment %}{% raw %} Source for below
  <script>
    window.STYLESHEETS = {
      light: [
        "{{ '/assets/lib/skeleton-light.css' | relative_url }}?v={{ site.build_version }}",
        "{{ '/assets/lib/balloon-light.css' | relative_url }}?v={{ site.build_version }}",
        {% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}"{{ '/assets/lib/lesson-default-light.css' | relative_url }}?v={{ site.build_version }}",{% endif %}
        "{{ '/assets/css/main-light.css' | relative_url }}?v={{ site.build_version }}",
        "{{ '/assets/lib/pygments-manni.css' | relative_url }}",
        {% if layout == 'home' or layout == 'subclub-landing' %}"{{ '/assets/css/home-light.css' | relative_url }}?v={{ site.build_version }}",{% endif %}
        {% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}"{{ '/assets/css/subclubs-light.css' | relative_url }}?v={{ site.build_version }}"{% endif %}
      ],
      dark: [
        "{{ '/assets/lib/skeleton-dark.css' | relative_url }}?v={{ site.build_version }}",
        "{{ '/assets/lib/balloon-dark.css' | relative_url }}?v={{ site.build_version }}",
        {% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}"{{ '/assets/lib/lesson-default-dark.css' | relative_url }}?v={{ site.build_version }}",{% endif %}
        "{{ '/assets/css/main-dark.css' | relative_url }}?v={{ site.build_version }}",
        "{{ '/assets/lib/pygments-native.css' | relative_url }}",
        {% if layout == 'home' or layout == 'subclub-landing' %}"{{ '/assets/css/home-dark.css' | relative_url }}?v={{ site.build_version }}",{% endif %}
        {% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}"{{ '/assets/css/subclubs-dark.css' | relative_url }}?v={{ site.build_version }}"{% endif %}
      ]
    };

    d.scripts[d.scripts.length - 1].insertAdjacentHTML('afterend', '<link href="' + STYLESHEETS[t].join('" class="toggled-theme" rel="stylesheet"><link href="') + '" class="toggled-theme" rel="stylesheet">');

    delete window.t; delete window.d;
  </script>
  {% endraw %}{% endcomment %}<script>window.STYLESHEETS={light:["{{ '/assets/lib/skeleton-light.css' | relative_url }}?v={{ site.build_version }}","{{ '/assets/lib/balloon-light.css' | relative_url }}?v={{ site.build_version }}",{% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}"{{ '/assets/lib/lesson-default-light.css' | relative_url }}?v={{ site.build_version }}",{% endif %}"{{ '/assets/css/main-light.css' | relative_url }}?v={{ site.build_version }}","{{ '/assets/lib/pygments-manni.css' | relative_url }}",{% if layout == 'home' or layout == 'subclub-landing' %}"{{ '/assets/css/home-light.css' | relative_url }}?v={{ site.build_version }}",{% endif %}{% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}"{{ '/assets/css/subclubs-light.css' | relative_url }}?v={{ site.build_version }}"{% endif %}],dark:["{{ '/assets/lib/skeleton-dark.css' | relative_url }}?v={{ site.build_version }}","{{ '/assets/lib/balloon-dark.css' | relative_url }}?v={{ site.build_version }}",{% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}"{{ '/assets/lib/lesson-default-dark.css' | relative_url }}?v={{ site.build_version }}",{% endif %}"{{ '/assets/css/main-dark.css' | relative_url }}?v={{ site.build_version }}","{{ '/assets/lib/pygments-native.css' | relative_url }}",{% if layout == 'home' or layout == 'subclub-landing' %}"{{ '/assets/css/home-dark.css' | relative_url }}?v={{ site.build_version }}",{% endif %}{% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}"{{ '/assets/css/subclubs-dark.css' | relative_url }}?v={{ site.build_version }}"{% endif %}]};d.scripts[d.scripts.length-1].insertAdjacentHTML('afterend','<link href="'+STYLESHEETS[t].join('" class="toggled-theme" rel="stylesheet"><link href="')+'" class="toggled-theme" rel="stylesheet">');delete window.t;delete window.d</script>

  {% if page.addons.styles %}
    {% for style in page.addons.styles %}
  <link href="{{ style }}" rel="stylesheet">
    {% endfor %}
  {% endif %}

  <!-- END CSS -->

  <!-- BEGIN JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cash/1.3.5/cash.min.js" integrity="sha384-lQ7xw9BfI+dxbYXadQYkYebeHeyMeYYYUrM/oD5Z0g/ediwh63F/Mf6x48hs4m3E" crossorigin="anonymous" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.4/js.cookie.min.js" integrity="sha384-3C51VYzyLN6W+IdxzwqCdGDQUOJfaRbPH2h6z97sB+sD4nZ4FCymhVZFvHMGN2ZE" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.0.0/anchor.min.js" integrity="sha384-vWR/JwZ17UvVCsqyfcCiaUK/5IAENMkGqXYrBRCURUFLS+aW63Zpsz5XqiDzrMQu" crossorigin="anonymous" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.js" integrity="sha384-L9gv4ooDLrYwW0QCM6zY3EKSSPrsuUncpx26+erN0pJX4wv1B1FzVW1SvpcJPx/8" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/contrib/auto-render.min.js" integrity="sha384-RkgGHBDdR8eyBOoWeZ/vpGg1cOvSAJRflCUDACusAAIVwkwPrOUYykglPeqWakZu" crossorigin="anonymous" defer></script>

  <script src="{{ '/assets/js/consts.js' | relative_url }}?v={{ site.build_version }}" defer></script>

  <script src="{{ '/assets/js/utils.js' | relative_url }}?v={{ site.build_version }}" defer></script>

  <script src="{{ '/assets/js/main.js' | relative_url }}?v={{ site.build_version }}" defer></script>

  {% if layout == 'lesson' or layout == 'landing' or layout == 'post' or layout == 'resource' %}
  <script src="{{ '/assets/js/subclubs.js' | relative_url }}?v={{ site.build_version }}" defer></script>
  {% endif %}

  <script src="{{ '/assets/js/feedback.js' | relative_url }}?v={{ site.build_version }}" defer></script>

  {% if page.addons.scripts %}
    {% for script in page.addons.scripts %}
  <script src="{{ script }}" defer></script>
    {% endfor %}
  {% endif %}

  <!-- BEGIN PAGE-ADDED JS -->
  {% comment %}{% raw %} Source for below
  <script>
    window.SCRIPTS = (function (g) {
      var scripts = [];

      return {
        add: function (fn) {
          scripts.push(fn);
        },
        run: function () {
          for (var i=0;i<scripts.length;i++) {
            try { scripts[i].call(g); }
            catch (e) { console.log('Onload script error: ' + e.message); }
          }
        }
      };
    })(window);
  </script>
  {% endraw %}{% endcomment %}<script>window.SCRIPTS=(function(g){var s=[];return{add:function(f){s.push(f)},run:function(){for(var i=0;i<s.length;i+=1){try{s[i].call(g)}catch(e){console.log('Onload script error: '+e.message)}}}}})(window)</script>
  <!-- END PAGE-ADDED JS -->

  <!-- BEGIN MATHJAX -->
  {% comment %}{% raw %} Source for below
  <script type='text/x-mathjax-config'>
    MathJax.Hub.Config({
      extensions: [
        'tex2jax.js',
        'TeX/AMSmath.js',
        'TeX/AMSsymbols.js',
        'TeX/cancel.js',
        'TeX/color.js'
        {% if page.addons.mathjax.extensions %}
          {% for ext in page.addons.mathjax.extensions %}
        ,'{{ ext }}'
          {% endfor %}
        {% endif %}
      ],
      jax: [
        'input/TeX',
        'output/CommonHTML'
        {% if page.addons.mathjax.jax %}
          {% for jax in page.addons.mathjax.jax %}
        ,'{{ jax }}'
          {% endfor %}
        {% endif %}
      ],
      TeX: {
        equationNumbers: {
          autoNumber: 'AMS'
        }
      },
      tex2jax: {
        balanceBraces: false,
        processEnvironments: false,
        processRefs: false
        {% if page.addons.mathjax.tex2jax %}
          {% for tex2jax in page.addons.mathjax.tex2jax %}
        , {{ tex2jax[0] }}: {{ tex2jax[1] | jsonify }}
          {% endfor %}
        {% endif %}
      }
      {% if page.addons.mathjax.core %}
        {% for entry in page.addons.mathjax.core %}
      , {{ entry[0] }}: {{ entry[1] | jsonify }}
        {% endfor %}
      {% endif %}
    });
  </script>
  {% endraw %}{% endcomment %}<script type='text/x-mathjax-config'>MathJax.Hub.Config({extensions:['tex2jax.js','TeX/AMSmath.js','TeX/AMSsymbols.js','TeX/cancel.js','TeX/color.js'{% if page.addons.mathjax.extensions %}{% for ext in page.addons.mathjax.extensions %},'{{ ext }}'{% endfor %}{% endif %}],jax:['input/TeX','output/CommonHTML'{% if page.addons.mathjax.jax %}{% for jax in page.addons.mathjax.jax %},'{{ jax }}'{% endfor %}{% endif %}],TeX:{equationNumbers:{autoNumber:'AMS'}},tex2jax:{balanceBraces:false,processEnvironments:false,processRefs:false{% if page.addons.mathjax.tex2jax %}{% for tex2jax in page.addons.mathjax.tex2jax %},{{ tex2jax[0] }}:{{ tex2jax[1] | jsonify }}{% endfor %}{% endif %}}{% if page.addons.mathjax.core %}{% for entry in page.addons.mathjax.core %},{{ entry[0] }}:{{ entry[1] | jsonify }}{% endfor %}{% endif %}})</script>
  <!-- END MATHJAX -->
  <!-- END JS -->

  <noscript><style>
  script[type*='math/tex']{display:inline-block!important;font-family:monospace;white-space:pre;}
  script[type*='math/tex'][type*='mode=display']{display:block!important;width:100%;text-align:center;}
  </style></noscript>
</head>
